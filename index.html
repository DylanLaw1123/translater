<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Morse Translator</title>
  <style>
    body {
      font-family: "Segoe UI", "Noto Sans SC", sans-serif;
      background: #f1f3f4;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 90%;
      max-width: 900px;
      padding: 20px;
    }

    .content {
      display: flex;
      width: 100%;
      overflow: hidden;
    }

    .panel {
      flex: 1;
      padding: 10px;
      display: flex;
      flex-direction: column;
    }

    .panel textarea {
      flex: 1;
      resize: none;
      border: none;
      outline: none;
      font-size: 1.2rem;
      padding: 10px;
      background: #fafafa;
      border-radius: 8px;
      line-height: 1.5;
    }

    .middle {
      width: 80px;
      background: #e7ebee;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: 0.3s;
    }

    .middle:hover {
      background: #d4d8db;
    }

    .middle span {
      font-size: 2rem;
      user-select: none;
    }

    h2 {
      font-size: 1rem;
      color: #5f6368;
      margin-bottom: 10px;
    }

    .output-box {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      background: #fafafa;
      border-radius: 8px;
      padding: 10px;
      font-family: monospace;
      font-size: 1.2rem;
      overflow-y: auto;
      min-height: 100px;
    }

    .cell {
      background: #fff;
      border: 1px solid #d1d5db;
      padding: 6px 10px;
      border-radius: 6px;
      min-width: 45px;
      text-align: center;
    }

    .empty {
      background: #e5e7eb;
    }

    .copy-btn {
      margin-top: 10px;
      background: #4f46e5;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
    }

    .copy-btn:hover {
      background: #4338ca;
    }

    .copied {
      color: #10b981;
      font-size: 0.9rem;
      margin-top: 6px;
      display: none;
    }

    footer {
      margin-top: 15px;
      font-size: 0.9rem;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="content">
      <div class="panel">
        <h2 id="left-label">Text</h2>
        <textarea id="inputText" placeholder="Type text here..."></textarea>
      </div>

      <div class="middle" id="swapBtn" title="Swap translation direction">
        <span>⇆</span>
      </div>

      <div class="panel">
        <h2 id="right-label">Morse Code</h2>
        <div id="outputBox" class="output-box"></div>
        <button class="copy-btn" id="copyBtn">Copy</button>
        <div id="copiedMsg" class="copied">Copied!</div>
      </div>
    </div>

    <footer>Made by Dylan Law</footer>
  </div>

  <script>
    const morseCode = {
      'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..',
      'E': '.', 'F': '..-.', 'G': '--.', 'H': '....',
      'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..',
      'M': '--', 'N': '-.', 'O': '---', 'P': '.--.',
      'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-',
      'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-',
      'Y': '-.--', 'Z': '--..',
      '1': '.----', '2': '..---', '3': '...--', '4': '....-', '5': '.....',
      '6': '-....', '7': '--...', '8': '---..', '9': '----.', '0': '-----',
      ' ': '/'
    };

    const reverseMorse = Object.fromEntries(Object.entries(morseCode).map(([k, v]) => [v, k]));
    let mode = "text-to-morse";

    const input = document.getElementById("inputText");
    const output = document.getElementById("outputBox");
    const swapBtn = document.getElementById("swapBtn");
    const leftLabel = document.getElementById("left-label");
    const rightLabel = document.getElementById("right-label");
    const copyBtn = document.getElementById("copyBtn");
    const copiedMsg = document.getElementById("copiedMsg");

    function beautifyMorse(code) {
      return code.replace(/\./g, '·').replace(/-/g, '—');
    }

    function convert() {
      output.innerHTML = '';
      const text = input.value.trim();

      if (mode === "text-to-morse") {
        for (let char of text.toUpperCase()) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          if (morseCode[char]) {
            cell.innerText = beautifyMorse(morseCode[char]);
          } else if (char === ' ') {
            cell.innerText = '';
            cell.classList.add("empty");
          } else {
            cell.innerText = '?';
          }
          output.appendChild(cell);
        }
      } else {
        const codes = text.replace(/·/g, '.').replace(/—/g, '-').split(' ');
        for (let code of codes) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          if (reverseMorse[code]) {
            cell.innerText = reverseMorse[code];
          } else if (code === '/') {
            cell.innerText = '';
            cell.classList.add("empty");
          } else {
            cell.innerText = '?';
          }
          output.appendChild(cell);
        }
      }
    }

    input.addEventListener("input", convert);

    swapBtn.addEventListener("click", () => {
      mode = (mode === "text-to-morse") ? "morse-to-text" : "text-to-morse";
      leftLabel.textContent = (mode === "text-to-morse") ? "Text" : "Morse Code";
      rightLabel.textContent = (mode === "text-to-morse") ? "Morse Code" : "Text";
      input.value = "";
      output.innerHTML = "";
      input.placeholder = (mode === "text-to-morse") ? "Type text here..." : "Type Morse code here (separate by spaces)...";
    });

    copyBtn.addEventListener("click", () => {
      const copiedText = Array.from(output.children).map(c => c.innerText).join(' ');
      navigator.clipboard.writeText(copiedText);
      copiedMsg.style.display = "block";
      setTimeout(() => copiedMsg.style.display = "none", 2000);
    });
  </script>
</body>
</html>
